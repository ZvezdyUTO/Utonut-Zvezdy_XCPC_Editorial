# Kevin and Bipartite Graph

所有者: Zvezdy
标签: 图论, 思维, 构造
创建时间: 2025年3月17日 17:00

很有说法的一道思维题，包含各种思维上的trick和图论的性质。

这题需要我们构造一个不存在同个颜色环的二分图，没有同种颜色的环可以间接看作是对于单个颜色，构造出来不存在环，没有环，那就是一棵树，树是可以被分割为森林的，所以对于每种颜色来说就是一个森林。同时也可知，对于每种颜色，最多能构造2*n+m-1条边，我们有n种颜色，所以最多能合法构造n*(2*n+m-1)条边，化简不等式可得2*n-1≥m。

接下来就是构造环节，我们可以看作是将每种颜色都单独连城一棵树，或者森林。在极限情况下观察，可以发现当右侧点每个点都各存在两根相同颜色的线时是刚好铺满的情况，另一种证明是，我们可以舍弃右边的点，只观察左边，我们的目标是使用一种颜色的线将左边的点串成树，那么二分图可以看成是用两条边同时连接另一侧同个点。并且只要一侧经过“转换”的点构不成环，那么可以肯定另一侧点也无法构成环。因此目标已经可以确定：使用同种颜色的线将左侧的点串成n棵树，同时结合另一侧每个点只有两条相同颜色线相连的条件可以给出一个循环构造的方案。

```cpp
/*
 *  ██╗   ██╗████████╗ ██████╗ ███╗   ██╗██╗   ██╗████████╗
 *  ██║   ██║╚══██╔══╝██╔═══██╗████╗  ██║██║   ██║╚══██╔══╝
 *  ██║   ██║   ██║   ██║   ██║██╔██╗ ██║██║   ██║   ██║
 *  ██║   ██║   ██║   ██║   ██║██║╚██╗██║██║   ██║   ██║
 *  ╚██████╔╝   ██║   ╚██████╔╝██║ ╚████║╚██████╔╝   ██║
 *   ╚═════╝    ╚═╝    ╚═════╝ ╚═╝  ╚═══╝ ╚═════╝    ╚═╝
 *
 *  ███████╗██╗   ██╗███████╗███████╗██████╗ ██╗   ██╗
 *  ╚══███╔╝██║   ██║██╔════╝╚══███╔╝██╔══██╗╚██╗ ██╔╝
 *    ███╔╝ ██║   ██║█████╗    ███╔╝ ██║  ██║ ╚████╔╝
 *   ███╔╝  ╚██╗ ██╔╝██╔══╝   ███╔╝  ██║  ██║  ╚██╔╝
 *  ███████╗ ╚████╔╝ ███████╗███████╗██████╔╝   ██║
 *  ╚══════╝  ╚═══╝  ╚══════╝╚══════╝╚═════╝    ╚═╝
 */
// #pragma GCC optimize(2)
// #pragma GCC optimize(3,"Ofast","inline")
#include <bits/stdc++.h>
using ll = long long;
#define int ll
#define debug(x) std::cout << #x << " = " << x << '\n'

void Main_work() {
    int n, m;
    std::cin >> n >> m;
    if (2 * n - 1 < m) {
        std::cout << "NO\n";
        return;
    }
    std::cout << "YES\n";
    for (int i = 1; i <= 2 * n; ++i) {
        for (int j = 1; j <= m; ++j) {
            std::cout << (i + j) % (2 * n) / 2 + 1 << ' ';
        }
        std::cout << '\n';
    }
}

void init() {
}

signed main() {
    std::ios::sync_with_stdio(false);
    std::cin.tie(0), std::cout.tie(0);
    // freopen("test.in", "r", stdin);
    // freopen("test.out", "w", stdout);
    init();
    int Zvezdy = 1;
    std::cin >> Zvezdy;
    while (Zvezdy--) {
        Main_work();
    }
    return 0;
}
```