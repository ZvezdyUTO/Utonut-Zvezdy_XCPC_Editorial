# Timaeus

所有者: Zvezdy
标签: 动态规划, 数学
创建时间: 2024年5月4日 21:10

如果手动模拟的话，会发现在不同的操作，我们会获得不同的收益，也会有不同的概率让我们当前手中有不同数量剩余的花。那么就可以考虑DP了，状态就是手头剩余x朵花的概率。然后由手头的概率，通过乘法原理可以推导出我们进行两种不同操作后分别导致的结果，并将这些结果通过加法原理累加起来。

只要当前原料数量大于等于b，我们都可以拿当前的状态换一个特殊的花，所以每到一个状态，我们就先拿这个状态算出之后的状态，并且拿当前的概率x1算出数学期望累加入答案就行。由此可以看出状态转移的一些关键点：从何处转移？如何转移（操作）？转移到何处？

最后特判一下1换1的情况，毕竟有概率啥也不花就白嫖到所有的合成物。一个等比数列求和，不过其中项数无限延伸，取个极限就好了。